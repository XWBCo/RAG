components:
  schemas:
    AuthRequest:
      type: "object"
      required:
        - "key"
        - "secret"
      properties:
        key:
          type: "string"
          example: "rf4-54g4gh35g-4f45g35g4"
          description: "Your key"
        secret:
          type: "string"
          example: "g234-gg-43g4g3g45g-43g554h65h32455654342g-tj3uierwf545g-4554yg4"
          description: "Your secret"
        portfolioId:
          type: "string"
          example: "(Optional) 5a5e197a7e9e3e000de62371"
          description: "Restrict the token generated to this portfolioId"
    AuthResponse:
      type: "object"
      properties:
        token:
          type: "string"
          example: "xxxxxxxxxxxx"
    PortfolioDetailResource:
      type: "object"
      properties:
        id:
          type: "string"
          description: "Id for the portfolio."
          example: "9a2f825g00013311c3b93699"
        name:
          type: "string"
          description: "Name of the portfolio."
          example: "My Example Portfolio"
        securitiesWeightDistribution:
          type: "string"
          description: "The way to distribute weights of each allocation of the portfolio."
          example: "PERCENTAGE"
          enum:
            - "PERCENTAGE"
            - "AMOUNT"
        status:
          type: "string"
          description: "Status of the portfolio. Values can be:\nDRAFT: This will be the value when the portfolio is being created\nUPDATING: The portfolio is being updated with new allocations\nCREATED: The portfolio has been created and information and scores can be requested.\nREJECTED: The portfolio has been rejected for a cause."
          example: "DRAFT"
          enum:
            - "DRAFT"
            - "CREATED"
            - "UPDATING"
            - "REJECTED"
        total:
          $ref: "#/components/schemas/PortfolioTotalResource"
        cause:
          type: "string"
          description: "When a portfolio is in state REJECTED, this field will include the cause of the rejection"
          example: "Portfolio is too large"
        securities:
          type: "array"
          description: "List of Security Items the portfolio is composed of."
          items:
            $ref: "#/components/schemas/SecurityWeightResource"
    PortfolioTotalResource:
      required:
        - "currency"
        - "value"
      type: "object"
      properties:
        value:
          minimum: 0
          exclusiveMinimum: true
          type: "number"
          description: "Amount of money invested without the currency code. It must be a positive number."
        currency:
          minLength: 1
          type: "string"
          description: "Currency in ISO-4217 3-letter code."
          example: "USD"
      description: "Total amount of money invested in the portfolio"
    SecurityWeightResource:
      type: "object"
      properties:
        isin:
          type: "string"
          deprecated: true
        id:
          type: "string"
        idType:
          type: "string"
          description: "Type of the security identifier. Values can only be:\nISIN: International Securities Identification Number, based on ISO 6166. It identifies financial instruments.\nCUSIP: A U.S. National Standard (under Accredited Standards X9.6) to identify a security.\nCASH: An asset representing cash including the ones related to foreign exchange.\nOTHER: Any other type of asset.\nLEI: Legal Entity Identifier, based on ISO 17442.\nPERMID: LSEG Permanent Identifiers."
          example: "ISIN"
          enum:
            - "CUSIP"
            - "ISIN"
            - "CASH"
            - "OTHER"
            - "LEI"
            - "PERMID"
        percentage:
          type: "number"
          format: "double"
        securityType:
          type: "string"
          description: "Only required when idType is LEI or PERMID. Suported values:\nEQUITY and\nFIXED_INCOME"
          example: "EQUITY"
          enum:
            - "EQUITY"
            - "FIXED_INCOME"
    APIError:
      type: "object"
      properties:
        code:
          type: "integer"
          format: "int32"
        message:
          type: "string"
    CreatePortfolioApiRequest:
      required:
        - "securities"
        - "securitiesWeightDistribution"
      type: "object"
      properties:
        name:
          type: "string"
          description: "Name for the portfolio to be created."
          example: "My new portfolio"
        securitiesWeightDistribution:
          type: "string"
          description: "The way to distribute weights of each allocation of the portfolio."
          enum:
            - "PERCENTAGE"
            - "AMOUNT"
        securities:
          type: "array"
          description: "List of Security Items the portfolio will be composed of."
          items:
            $ref: "#/components/schemas/SecurityItemRequest"
        total:
          $ref: "#/components/schemas/PortfolioTotalRequest"
      description: "New portfolio composition"
    SecurityItemRequest:
      type: "object"
      properties:
        isin:
          pattern: "\\w[\\w\\s-/,.]*"
          type: "string"
          description: "Isin of the allocation. Deprecated in favor of `id` and `idType`"
          example: "XX0123456789"
          deprecated: true
        id:
          pattern: "\\w[\\w\\s-/,.]*"
          type: "string"
          description: "Security identifier of the allocation."
          example: "XX0123456789"
        idType:
          type: "string"
          description: "Type of the security identifier. Values can only be:\nISIN: International Securities Identification Number, based on ISO 6166. It identifies financial instruments.\nCUSIP: A U.S. National Standard (under Accredited Standards X9.6) to identify a security.\nCASH: An asset representing cash including the ones related to foreign exchange.\nOTHER: Any other type of asset.\nLEI: Legal Entity Identifier, based on ISO 17442.\nPERMID: LSEG Permanent Identifiers."
          example: "ISIN"
          enum:
            - "CUSIP"
            - "ISIN"
            - "CASH"
            - "OTHER"
            - "LEI"
            - "PERMID"
        securityType:
          type: "string"
          description: "Only required when idType is LEI or PERMID. Suported values:\nEQUITY and\nFIXED_INCOME"
          example: "EQUITY"
          enum:
            - "EQUITY"
            - "FIXED_INCOME"
        percentage:
          type: "number"
          description: "Percentage of the allocation in the portfolio. Required when using PERCENTAGE weight distribution type."
          format: "double"
          example: 100
        amount:
          type: "number"
          description: "Value of the allocation in the portfolio. Required when using AMOUNT weight distribution type."
          format: "double"
          example: 180.98
        currency:
          type: "string"
          description: "Currency of the allocation in the portfolio. Required when using AMOUNT weight distribution type."
          example: "EUR"
    PortfolioTotalRequest:
      required:
        - "currency"
        - "value"
      type: "object"
      properties:
        value:
          minimum: 0
          exclusiveMinimum: true
          type: "number"
          description: "Amount of money invested without the currency code. It must be a positive number."
        currency:
          minLength: 1
          type: "string"
          description: "Currency in ISO-4217 3-letter code."
          example: "USD"
      description: "Total value of the portfolio."
    EditPortfolioResource:
      type: "object"
      properties:
        portfolioId:
          type: "string"
          description: "ID of the portfolio being updated."
    PortfolioSummaryResource:
      type: "object"
      properties:
        portfolios:
          type: "array"
          description: "List of Portfolios."
          items:
            $ref: "#/components/schemas/PortfolioItemResource"
        hasMoreData:
          type: "boolean"
          description: "Informs whether there are more pages available."
          example: false
        totalNumberOfRecords:
          type: "integer"
          description: "Total number of Portfolios."
          format: "int64"
          example: 200
    PortfolioItemResource:
      type: "object"
      properties:
        id:
          type: "string"
          description: "ID for the portfolio."
          example: "9a2f825g00013311c3b93699"
        name:
          type: "string"
          description: "Name for the portfolio."
          example: "My Portfolio"
    JobStatus:
      type: "object"
      properties:
        statusMessage:
          title: "Status message"
          type: "string"
          example: "SUCCESS"
          enum:
            - "ERROR"
            - "RUNNING"
            - "SUCCESS"
            - "UNKNOWN"
      description: "Async Job status"
    SecuritiesRequest:
      type: "object"
      properties:
        securityIds:
          type: "array"
          description: "List of security ids to retrieve. Use the securityIdsType field to specify the provided identifier types, if empty ISIN will be assumed."
          example:
            - "USXXXXXXXXXX"
            - "ESXXXXXXXXXX"
            - "JPXXXXXXXXXX"
            - "GBXXXXXXXXXX"
          items:
            type: "string"
        securityIdsType:
          type: "string"
          description: "Defines the security identifier type used in the securityIds parameter."
          nullable: true
          example: "CUSIP"
          default: "ISIN"
          enum:
            - "ISIN"
            - "CUSIP"
        permIds:
          type: "array"
          description: "List of organization ids (PermId) to retrieve"
          example:
            - "4295877421"
            - "5035540792"
          items:
            type: "string"
        idColumns:
          type: "array"
          description: "Specifies a list of security ID types that will be included in the header of the CSV response.\nThe securities that do not have any identifier type matching with the headers will be filtered out of the response.\nWith the value ALL no securities will be filtered out.\n"
          example:
            - "CUSIP"
            - "ISIN"
          items:
            type: "string"
            enum:
              - "ISIN"
              - "CUSIP"
              - "ALL"
          default:
            - "ISIN"
        limitResults:
          minimum: 1
          type: "integer"
          description: "Limit the number of securities per organization"
          format: "int32"
          nullable: true
          example: 50
        securityTypes:
          type: "array"
          description: "Limit the result to securities of type belonging to securityTypes"
          example:
            - "EQUITY"
            - "FIXED_INCOME"
            - "FUND"
          items:
            type: "string"
        additionalOrganizationColumns:
          type: "array"
          description: "Additional organization columns to return in the response"
          example:
            - "ORGNAME"
            - "ORGCOUNTRY"
          items:
            type: "string"
            enum:
              - "ORGNAME"
              - "ORGCOUNTRY"
          default: []
    CreateJobResource:
      type: "object"
      properties:
        uuid:
          type: "string"
    FundMappingRequest:
      type: "object"
      properties:
        fundIds:
          type: "array"
          description: "List of fund ids to retrieve. Use the securityIdsType field to specify the provided identifier types, if empty ISIN will be assumed."
          example:
            - "USXXXXXXXXXX"
            - "ESXXXXXXXXXX"
            - "JPXXXXXXXXXX"
            - "GBXXXXXXXXXX"
          items:
            type: "string"
        securityIdsType:
          type: "string"
          description: "Defines the security identifier type used in the fundIds parameter"
          nullable: true
          example: "CUSIP"
          default: "ISIN"
          enum:
            - "ISIN"
            - "CUSIP"
        fundGroupIds:
          type: "array"
          description: "List of fund group ids to retrieve"
          example:
            - "01GFTZ1XXXXXXXXXXXXXXXXXXX"
            - "01GFTZ2XXXXXXXXXXXXXXXXXXX"
          items:
            type: "string"
        idColumns:
          type: "array"
          description: "Specifies a list of security ID types that will be included in the header of the CSV response.\nThe funds that do not have any identifier type matching with the headers will be filtered out of the response.\nWith the value ALL no funds will be filtered out.\n"
          example:
            - "CUSIP"
            - "ISIN"
          items:
            type: "string"
            enum:
              - "ISIN"
              - "CUSIP"
              - "ALL"
          default:
            - "ISIN"
        onlyOneSecurityPerFundGroupId:
          type: "boolean"
          description: "When enabled return only one fund id per each fund group id"
          example: true
          default: false
    OrganizationsRequest:
      required:
        - "idType"
      type: "object"
      properties:
        ids:
          type: "array"
          description: "List of security ids to retrieve. Use the type field to specify the provided identifier types."
          example:
            - "5064690523"
            - "5064690523"
          items:
            type: "string"
        idType:
          type: "string"
          description: "Defines the organization identifier type used in the ids parameter."
          example: "PermID"
          enum:
            - "PermID"
            - "LEI"
  securitySchemes:
    JWT:
      type: "http"
      scheme: "bearer"
      bearerFormat: "JWT"
info:
  title: "Clarity AI API - Common"
  description: "API to access Clarity AI data services."
  termsOfService: "https://static.clarity.ai/Clarity_AI_TermsAndConditions.pdf"
  contact:
    name: "Clarity AI"
    url: "https://www.clarity.ai"
    email: "support@clarity.ai"
  version: "1.0.0"
openapi: "3.0.1"
paths:
  /oauth/token:
    post:
      tags:
        - "Access Token Generation"
      description: "Get authorization token using client credentials.\nThe authorization token is available only for 60 minutes.\nAfter the time has elapsed, a new access token can be generated by entering the key and secret again to generate a new access token.\nThe Token should be used in the header \"Authorization\" of each request and value \"Bearer <yourTokenHere>\". **Optionally** a portfolioId can be provided so the token will only be able to access that portfolio and no other."
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AuthRequest"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthResponse"
        401:
          description: "Unauthorized:\n\n1002 - The key or secret is not valid"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthResponse"
  /public/portfolios/{portfolioId}:
    get:
      tags:
        - "Portfolios Management"
      summary: "Get portfolio by ID"
      description: "Given a portfolioId, return the portfolio name, status, total and portfolio composition: list of ISINs and portfolio weight."
      operationId: "getPortfolio"
      parameters:
        - name: "portfolioId"
          in: "path"
          description: "The portfolio id you are looking for"
          required: true
          schema:
            type: "string"
          example: "9a2f825g00013311c3b93699"
      responses:
        200:
          description: "The requested portfolio details."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PortfolioDetailResource"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n2007 - The portfolio id does not exist or does not belong to the user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
    put:
      tags:
        - "Portfolios Management"
      summary: "Update Portfolio"
      description: "Update the allocation composition, total and name of a portfolio given its ID. Portfolios can be provided in two ways:\n  1. By providing percentage weights of each holding (specifying securitiesWeightDistribution as PERCENTAGE). In this case you must also specify a total portfolio value.\n  2. By providing individual currency amounts for each holding (specifying securitiesWeightDistribution as AMOUNT). In this case, the total portfolio value is not required and you are also able to specify holding-specific currencies.\n\nOnce created, the unique id of the portfolio will be returned.\n"
      operationId: "updatePortfolio"
      parameters:
        - name: "portfolioId"
          in: "path"
          description: "The portfolio id to modify"
          required: true
          schema:
            type: "string"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePortfolioApiRequest"
        required: true
      responses:
        202:
          description: "Portfolio update is in process. The status of the portfolio changes to 'UPDATING' during the edition process. Once finished the status will return to CREATED"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EditPortfolioResource"
        400:
          description: "Invalid request:\n\n1014 - The data received in the request is not valid\n\n2000 - Securities weight does not sum 100\n\n2001 - Portfolio name null or empty\n\n2002 - The securityWeightDistribution used is not supported\n\n2009 - ISIN not found\n\n2016 - The portfolio has at least a security with a percentage less than zero\n\n2026 - The securityType must be specified when idType is PERMID or LEI\n\n2010 - At least one ISIN appears twice"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n2007 - The portfolio id does not exist or does not belong to the user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        409:
          description: "Invalid request:\n\n2003 - Duplicated portfolio name"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
    delete:
      tags:
        - "Portfolios Management"
      summary: "Delete portfolio"
      description: "Delete a portfolio given its ID."
      operationId: "deletePortfolio"
      parameters:
        - name: "portfolioId"
          in: "path"
          description: "The portfolio id to delete"
          required: true
          schema:
            type: "string"
          example: "9a2f825g00013311c3b93699"
      responses:
        200:
          description: "OK"
        204:
          description: "The portfolio has been correctly deleted"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n2007 - The portfolio id does not exist or does not belong to the user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/portfolios:
    get:
      tags:
        - "Portfolios Management"
      summary: "List portfolios"
      description: "Paginated list of portfolio names and ids that are available for the user."
      operationId: "getPortfoliosList"
      parameters:
        - name: "pageNumber"
          in: "query"
          description: "Page Number"
          required: false
          schema:
            type: "string"
            default: "0"
          example: 0
        - name: "pageSize"
          in: "query"
          description: "Number of elements in each page"
          required: false
          schema:
            type: "string"
            default: "500"
          example: 20
      responses:
        200:
          description: "List of portfolios"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PortfolioSummaryResource"
        400:
          description: "Invalid request:\n\n1010 - The data for pagination is not valid"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
    post:
      tags:
        - "Portfolios Management"
      summary: "Create Portfolio"
      description: "Create a portfolio with a unique name from a list of holdings using ISIN, CUSIP, LEI or PERMID as the idType for securities. When LEI or PERMID are used, the securityType must also be provided as either EQUITY or FIXED_INCOME. It is also possible to use CASH or OTHER as the idType and provide a custom id (although no scores will be provided for these holdings).\nPortfolios can be provided in two ways:\n  1. By providing percentage weights of each holding (specifying securitiesWeightDistribution as PERCENTAGE). In this case you must also specify a total portfolio value.\n  2. By providing individual currency amounts for each holding (specifying securitiesWeightDistribution as AMOUNT). In this case, the total portfolio value is not required and you are also able to specify holding-specific currencies.\n\nOnce created, the unique id of the portfolio will be returned.\n"
      operationId: "createPortfolio"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreatePortfolioApiRequest"
        required: true
      responses:
        202:
          description: "Portfolio created"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PortfolioDetailResource"
        400:
          description: "Invalid request:\n\n1014 - The data received in the request is not valid\n\n2000 - Securities weight does not sum 100\n\n2001 - Portfolio name null or empty\n\n2002 - The securityWeightDistribution used is not supported\n\n2009 - ISIN not found\n\n2010 - At least one ISIN appears twice\n\n2011 - The portfolio is not valid\n\n2012 - Portfolio total value must be greater than zero\n\n2013 - Portfolio total currency invalid format\n\n2016 - The portfolio has at least a security with a percentage less than zero\n\n2014 - Portfolio total currency not supported\n\n2026 - The securityType must be specified when idType is PERMID or LEI\n\n2020 - The portfolio size limit exceeded"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        409:
          description: "Invalid request:\n\n2003 - Duplicated portfolio name"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        413:
          description: "Invalid request:\n\n2020 - The portfolio size limit exceeded"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/job/{jobId}/status:
    get:
      tags:
        - "Universe download - Asynchronous jobs"
      summary: "Async Job - Get job status"
      description: "This endpoint will return the status of a previously requested async job.<br>You must have previously obtained a identifier (uuid) for your task using one of the requests to that purpose before you can use this endpoint.<br><br>Check <a href=\"/docs/universe-api-async-jobs\">this document</a> for a complete explanation of the flow for these Async jobs endpoints"
      operationId: "asyncJobStatus"
      parameters:
        - name: "jobId"
          in: "path"
          required: true
          schema:
            type: "string"
      responses:
        202:
          description: "Job accepted"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JobStatus"
        302:
          description: "Resource Found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JobStatus"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JobStatus"
        422:
          description: "Error processing job:\n\nThe job was accepted but some error happened while processing - The job was accepted but some error happened while processing"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JobStatus"
      security:
        - JWT: []
  /public/job/{jobId}/fetch:
    get:
      tags:
        - "Universe download - Asynchronous jobs"
      summary: "Async Job - Download compressed result file"
      description: "This endpoint will return the file result of your async job request in the form of a compressed .gz file.<br>You must have previously obtained a identifier (uuid) for your task using one of the requests to that purpose before you can use this endpoint.<br>Also, it is advisable that you use the <a href=\"./asyncjobstatus\">Async Job - Get job status</a> endpoint to be sure that your request finished succesfully and your file is ready.<br><br>Check <a href=\"/docs/universe-api-async-jobs\">this document</a> for a complete explanation of the flow for these Async jobs endpoints"
      operationId: "asyncDownloadCompressedFile"
      parameters:
        - name: "jobId"
          in: "path"
          required: true
          schema:
            type: "string"
      responses:
        200:
          description: "Binary file sent in the response"
          content:
            application/octet-stream:
              schema:
                type: "string"
                format: "binary"
        202:
          description: "Job accepted"
          content:
            application/octet-stream:
              schema:
                type: "object"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found"
          content:
            application/octet-stream:
              schema:
                type: "object"
        410:
          description: "Target resource is no longer available"
          content:
            application/octet-stream:
              schema:
                type: "object"
      security:
        - JWT: []
  /public/job/{jobId}/download:
    get:
      tags:
        - "Universe download - Asynchronous jobs"
      summary: "Async Job - Download result file"
      description: "This endpoint will return the file result of your async job request.<br>You must have previously obtained a identifier (uuid) for your task using one of the requests to that purpose before you can use this endpoint.<br>Also, it is advisable that you use the <a href=\"./asyncjobstatus\">Async Job - Get job status</a> endpoint to be sure that your request finished succesfully and your file is ready.<br><br>Check <a href=\"/docs/universe-api-async-jobs\">this document</a> for a complete explanation of the flow for these Async jobs endpoints"
      operationId: "asyncDownloadFile"
      parameters:
        - name: "jobId"
          in: "path"
          required: true
          schema:
            type: "string"
      responses:
        200:
          description: "Binary file sent in the response"
          content:
            application/octet-stream:
              schema:
                type: "string"
                format: "binary"
        202:
          description: "Job accepted"
          content:
            application/octet-stream:
              schema:
                type: "object"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found"
          content:
            application/octet-stream:
              schema:
                type: "object"
        410:
          description: "Target resource is no longer available"
          content:
            application/octet-stream:
              schema:
                type: "object"
      security:
        - JWT: []
  /public/securities/mappings/organizations-by-id/async:
    post:
      tags:
        - "Universe download - Asynchronous jobs"
      summary: "Async Job - Request Securities with the Organization issuer"
      description: "<p>\nThis endpoint provides the entire universe of <a href=\"https://clarity.ai\">Clarity AI</a> securities and provides a mapping of\nClarity AI securities between different identifiers.\n</p>\n<p>\nYou can request the mapping by providing a list of PermIds in the <u><i>permIds</i></u> parameter or by providing a list of ISINs or\nCUSIPs in the <u><i>securityIds</i></u> parameter, but you CANNOT SPECIFY BOTH <u><i>permIds</i></u> and <u><i>securityIds</i></u>.\n<br>\n<br>\nIf requesting CUSIPs via <u><i>securityIds</i></u> the <u><i>securityIdsType</i></u> needs to be set to “CUSIP”.\n<br>\n<br>\nLeaving <u><i>securityIds</i></u> and <u><i>permIds</i></u> blank will return the whole Clarity AI universe.\n<br>\n<br>\nThe <u><i>idColumns</i></u> allows you to specify a list of security ID types that will be included in the response CSV. Only the\nsecurities that have an identifier type matching <u><i>idColumns</i></u> will be returned. If you want to retrieve all the\nsecurities, you can set <u><i>idColumns</i></u> to \"ALL\"  and no securities will be filtered out.\n<br>\nTake into account that when using the \"ALL\" parameter whenever a new security identifier type is available in the Clarity AI\nplatform it will be included in the CSV response.\n<br>\n<br>\nThe <u><i>securityTypes</i></u> parameter allows you to specify which type of securities will be returned: “EQUITY”, “FIXED_INCOME”,\nor “FUND”. You can specify multiple to receive multiple types or level blank to receive all available securities types.\n<br>\n<br>\nThe <u><i>additionalOrganizationColumns</i></u> allows you to specify a list of additional organization columns.\nAt the moment only <code>ORGNAME</code> and <code>ORGCOUNTRY</code> are supported.\n<br>\n<br>\nThe <u><i>limitResults</i></u> parameters allows you to limit the number of ISINS returned for each organization.\n</p>\n<p>\n<b>Please note</b>: This endpoint returns only the identifier (UUID) for the created job. You'll need this UUID value to retrieve the\nstatus of your job (see\n<a href=\"./asyncjobstatus\">Async Job - Get job status</a>) or to\ndownload your file when ready (see\n<a href=\"./asyncdownloadfile\">Async Job - Download result file</a>).\nSee <a href=\"/docs/universe-api-async-jobs\">Async API documentation</a> for a complete\nexplanation of the flow for these async jobs endpoints.\n</p>\n"
      operationId: "asyncSecuritiesOrganizationsMapping"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SecuritiesRequest"
      responses:
        200:
          description: "The job request has been accepted, uuid follows"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateJobResource"
        400:
          description: "Bad parameters on request:\n\n1014 - The data received in the request is not valid\n\n1023 - A security type is not valid\n\n2200 - The job was accepted but some error happened while processing\n\n2202 - The value 'ALL' can not be used in conjunction with other identifier types\n\n2203 - 'idColumns' must match 'securityIdTypes' when requesting by specific IDs\n\n5006 - Only one of these params can be present: %s. Please provide only one of them\n\n"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource\n\n2204 - Access is required to retrieve list of security ids without providing identifiers in request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/securities/mappings/funds-by-id/async:
    post:
      tags:
        - "Universe download - Asynchronous jobs"
      summary: "Async Job - Request Fund and FundGroupId mapping"
      description: "<p>\nThis endpoint provides the entire universe of <a href=\"https://clarity.ai\">Clarity AI</a> funds and provides a mapping of Clarity AI\nFund Group IDs between different identifiers.\n</p>\n<p>\nYou can request the mapping by providing a list of Fund Group IDs in the <u><i>fundGroupIds</i></u> parameter or by providing a list of\nISINs or CUSIPs in the <u><i>fundIds</i></u> parameter, but you CANNOT SPECIFY BOTH <u><i>fundGroupIds</i></u> and <u><i>fundIds</i></u>.\n<br>\n<br>\nIf requesting CUSIPs via <u><i>fundIds</i></u> the <u><i>securityIdsType</i></u> needs to be set to “CUSIP”.\n<br>\n<br>\nLeaving <u><i>fundIds</i></u> and <u><i>fundGroupIds</i></u> blank will return the whole Clarity AI universe.\n<br>\n<br>\nThe <u><i>idColumns</i></u> allows you to specify a list of security ID types that will be included in the response CSV. Only the funds\nthat have an identifier type matching <u><i>idColumns</i></u> will be returned. If you want to retrieve all the securities, you can set\n<u><i>idColumns</i></u> to \"ALL\"  and no funds will be filtered out.\n<br>\nTake into account that when using the \"ALL\" parameter whenever a new security identifier type is available in the Clarity AI platform\nit will be included in the CSV response.\n<br>\n<br>\nThe <u><i>onlyOneSecurityPerFundGroupId</i></u> parameters allows you to limit the number of ISINs returned to only one for each Found\nGroup ID.\n</p>\n<p>\n<b>Please note</b>: This endpoint returns only the identifier (UUID) for the created job. You'll need this UUID value to retrieve the\nstatus of your job (see\n<a href=\"./asyncjobstatus\">Async Job - Get job status</a>) or to download\nyour file when ready (see\n<a href=\"./asyncdownloadfile\">Async Job - Download result file</a>).\nSee <a href=\"/docs/universe-api-async-jobs\">Async API documentation</a> for a complete\nexplanation of the flow for these async jobs endpoints.\n</p>\n"
      operationId: "asyncFundGroupIdMapping"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FundMappingRequest"
        required: true
      responses:
        200:
          description: "The job request has been accepted, uuid follows"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateJobResource"
        400:
          description: "Bad parameters on request:\n\n1014 - The data received in the request is not valid\n\n1023 - A security type is not valid\n\n2200 - The job was accepted but some error happened while processing\n\n2202 - The value 'ALL' can not be used in conjunction with other identifier types\n\n2203 - 'idColumns' must match 'securityIdTypes' when requesting by specific IDs\n\n5006 - Only one of these params can be present: %s. Please provide only one of them\n\n"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource\n\n2204 - Access is required to retrieve list of security ids without providing identifiers in request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/organizations/mappings/async:
    post:
      tags:
        - "Universe download - Asynchronous jobs"
      summary: "Async job - Request mapping between Organization PermID and LEI identifiers"
      description: "<p>\nThis endpoint provides a mapping of <a href=\"https://clarity.ai\">Clarity AI</a> organizations between different identifiers.\n</p>\n<p>\nYou can request the mapping by providing a list of PermIDs or LEIs in the <u><i>ids</i></u> parameter. You need to specify the type of\nids provided in the <u><i>idType</i></u> parameter. The <u><i>idType</i></u> parameter can be either “PermID” or “LEI”.\n</p>\n<p>\n<b>Please note</b>: This endpoint returns only the identifier (UUID) for the created job. You'll need this UUID value to retrieve the\nstatus of your job (see\n<a href=\"./asyncjobstatus\">Async Job - Get job status</a>) or to\ndownload your file when ready (see\n<a href=\"./asyncdownloadfile\">Async Job - Download result file</a>).\nSee <a href=\"/docs/universe-api-async-jobs\">Async API documentation</a> for a complete\nexplanation of the flow for these async jobs endpoints.\n</p>\n"
      operationId: "asyncOrganizationsMapping"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OrganizationsRequest"
        required: true
      responses:
        200:
          description: "The job request has been accepted, uuid follows"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateJobResource"
        400:
          description: "Bad parameters on request:\n\n1014 - The data received in the request is not valid"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
servers:
  - url: "https://api.clarity.ai/clarity/v1"
  - url: "https://api.dev.clarity.ai/clarity/v1"
tags:
  - name: "Access Token Generation"
    description: "Access token generation"
  - name: "Universe download - Asynchronous jobs"
    description: "Universe download - Asynchronous jobs"
security:
  - JWT: []
  - JWT: []
  - JWT: []
  - JWT: []
