components:
  schemas:
    EsgRiskSecuritiesRequest:
      type: "object"
      properties:
        idColumns:
          uniqueItems: true
          type: "array"
          items:
            type: "string"
        scoreIds:
          uniqueItems: true
          type: "array"
          description: "Requested Score IDs"
          example: "ENVIRONMENTAL"
          items:
            type: "string"
        securityTypes:
          uniqueItems: true
          type: "array"
          items:
            type: "string"
        securityIdsType:
          type: "string"
        securityIds:
          uniqueItems: true
          type: "array"
          items:
            type: "string"
        scoringProfileId:
          type: "string"
          description: "Standard Scoring profile ID used to calculate the ESG score, with universe of companies, materiality weights, relevance threshold"
          example: "ESG_RISK_INDUSTRY_CONSENSUS"
        includeMateriality:
          type: "boolean"
          description: "Include materiality weight for each score in the downloaded file. Funds will return null value as materiality weight doesn't apply."
          nullable: true
          example: true
          default: false
    CreateJobResource:
      type: "object"
      properties:
        uuid:
          type: "string"
    APIError:
      type: "object"
      properties:
        code:
          type: "integer"
          format: "int32"
        message:
          type: "string"
    EsgRiskOrganizationsRequest:
      type: "object"
      properties:
        scoreIds:
          uniqueItems: true
          type: "array"
          description: "Requested Score IDs"
          example: "ENVIRONMENTAL"
          items:
            type: "string"
        permIds:
          uniqueItems: true
          type: "array"
          description: "List of organizations, identified by permId, to retrieve information from. If this parameter is not present, all available organizations will be returned"
          example: 5000008406
          items:
            type: "string"
        scoringProfileId:
          type: "string"
          description: "Standard Scoring profile ID used to calculate the ESG score, with universe of companies, materiality weights, \nrelevance threshold"
          example: "ESG_RISK_INDUSTRY_CONSENSUS"
        includeMateriality:
          type: "boolean"
          description: "Include materiality weight for each score in the downloaded file. "
          nullable: true
          example: true
          default: false
    EsgRiskFundsRequest:
      type: "object"
      properties:
        idColumns:
          uniqueItems: true
          type: "array"
          items:
            type: "string"
        optionalColumns:
          type: "array"
          items:
            type: "string"
        onlyOneSecurityPerFundGroupId:
          type: "boolean"
        scoreIds:
          uniqueItems: true
          type: "array"
          description: "Requested Score IDs"
          example: "ENVIRONMENTAL"
          items:
            type: "string"
        scoringProfileId:
          type: "string"
          description: "Standard Scoring profile ID used to calculate the ESG score, with universe of companies, materiality weights, \nrelevance threshold"
          example: "ESG_RISK_INDUSTRY_CONSENSUS"
    PortfolioOrganizationsResource:
      type: "object"
      properties:
        organizations:
          type: "array"
          description: "Portfolio's organizations"
          items:
            $ref: "#/components/schemas/OrganizationSummaryResource"
    OrganizationSummaryResource:
      type: "object"
      properties:
        orgName:
          type: "string"
          description: "Organization's name"
          example: "Mock Company"
        portfolioWeight:
          type: "number"
          description: "Organization's weight on the portfolio"
          format: "double"
          example: 40.33
        scores:
          type: "array"
          description: "Organization's social impact"
          items:
            $ref: "#/components/schemas/EsgScoreElement"
      description: "Portfolio's organizations"
    EsgScoreElement:
      title: "scores"
      type: "object"
      properties:
        id:
          type: "string"
          description: "Id of the metric/subcategory/category/pillar/total ESG behind the score."
          example: "ENVIRONMENTAL"
        pillar:
          type: "string"
          description: "Pillar to which the requested metric belongs"
          example: "SOCIAL"
        treeLevel:
          type: "string"
          description: "Level on the ESG tree to the metric belongs to"
          example: "PILLAR"
          enum:
            - "TOTAL"
            - "PILLAR"
            - "CATEGORY"
            - "SUBCATEGORY"
            - "METRIC"
        score:
          type: "string"
          description: "Score for a specific scoring profile."
          format: "byte"
          example: "Nzg="
        metadata:
          type: "string"
          description: "Metadata for the score"
          example: "NONE"
          enum:
            - "NONE"
            - "ASSIGNED"
            - "LIMITED_INFO"
            - "NOT_AVAILABLE"
            - "NOT_IMPORTANT"
            - "NOT_APPLICABLE"
            - "OUT_OF_UNIVERSE"
        relevance:
          type: "integer"
          description: "Data Relevance is the total importance of all applicable metrics with raw data available. Depending on the configuration of the Scoring Profile, scores may be assigned for applicable metrics when raw data is not available."
          format: "int32"
          example: 98
        peersPercentile:
          type: "string"
          description: "Percentile in which an organization is classified comparing ESG score of it industry peers"
          format: "byte"
          example: "MTU="
      description: "Score elements for the request."
      example:
        - id: "TOTAL"
          treeLevel: "TOTAL"
          score: 75
          metadata: "NONE"
          relevance: 88
          peersPercentile: 12
        - id: "ENVIRONMENTAL"
          treeLevel: "PILLAR"
          score: 70
          metadata: "NONE"
          relevance: 92
        - id: "SOCIAL"
          treeLevel: "PILLAR"
          score: 53
          metadata: "NONE"
          relevance: 81
        - id: "GOVERNANCE"
          treeLevel: "PILLAR"
          score: 69
          metadata: "NONE"
          relevance: 90
    PortfolioEsgScore:
      type: "object"
      properties:
        name:
          type: "string"
          description: "The name of the portfolio"
          example: "Portfolio name"
        updateDate:
          type: "integer"
          description: "The date of the last update "
          format: "int64"
          example: 1588897240648
        coverageWeight:
          type: "number"
          description: "Coverage of the portfolio "
          format: "double"
          example: 94.8458922857771
        scoringProfileId:
          type: "string"
          description: "Scoring profile used to calculate the ESG score,with universe of companies, materiality weights, relevance threshold."
          example: "ESG_RISK_INDUSTRY_CONSENSUS"
        elements:
          type: "array"
          description: "Child elements (if any) for the subcategory/category/pillar/total."
          example:
            - id: "TOTAL"
              treeLevel: "TOTAL"
              score: 75
              metadata: "NONE"
              relevance: 88
            - id: "ENVIRONMENTAL"
              treeLevel: "PILLAR"
              score: 70
              metadata: "NONE"
              relevance: 92
            - id: "SOCIAL"
              treeLevel: "PILLAR"
              score: 53
              metadata: "NONE"
              relevance: 81
            - id: "GOVERNANCE"
              treeLevel: "PILLAR"
              score: 69
              metadata: "NONE"
              relevance: 90
          items:
            $ref: "#/components/schemas/EsgScoreElement"
        totalOrganizations:
          type: "integer"
          description: "Number of organizations in the portfolio"
          format: "int32"
          example: 968
        coverageOrganizations:
          type: "integer"
          description: "Number of relevant organizations in the portfolio"
          format: "int32"
          example: 673
      description: "Portfolio with ESG Score descriptor"
    ScoringProfileWithEsgScoresResource:
      type: "object"
      properties:
        scoringProfileId:
          type: "string"
          description: "Scoring profile used to calculate the ESG score,with universe of companies, materiality weights, relevance threshold."
          example: "ESG_RISK_INDUSTRY_CONSENSUS"
        elements:
          type: "array"
          description: "Child elements (if any) for the subcategory/category/pillar/total."
          example:
            - id: "TOTAL"
              treeLevel: "TOTAL"
              score: 75
              metadata: "NONE"
              relevance: 88
            - id: "ENVIRONMENTAL"
              treeLevel: "PILLAR"
              score: 70
              metadata: "NONE"
              relevance: 92
            - id: "SOCIAL"
              treeLevel: "PILLAR"
              score: 53
              metadata: "NONE"
              relevance: 81
            - id: "GOVERNANCE"
              treeLevel: "PILLAR"
              score: 69
              metadata: "NONE"
              relevance: 90
          items:
            $ref: "#/components/schemas/EsgScoreElement"
    FundSummaryEsgScore:
      type: "object"
      properties:
        isin:
          type: "string"
          description: "ISIN code, if no other type of identifier was explicitly requested"
          example: "US0378331005"
        cusip:
          type: "string"
          description: "CUSIP code, if requested"
          example: "037833100"
        name:
          type: "string"
          description: "Name of the Fund."
          example: "Some Fund Name"
        allocationDate:
          type: "string"
          description: "Last holdings allocation date of the requested fund."
          format: "date-time"
          example: "2020-02-28T07:13:25Z"
        coverageWeight:
          type: "number"
          description: "Percentage of the fund with ESG data."
          format: "double"
          example: 99.89
        scoringProfileId:
          type: "string"
          description: "Standard Scoring profile used to calculate the ESG score,with universe of companies, materiality weights, relevance threshold."
          example: "ESG_RISK_INDUSTRY_CONSENSUS"
        peersGroup:
          $ref: "#/components/schemas/PeersGroupFund"
        scores:
          title: "scores"
          type: "array"
          description: "Score elements for the request."
          example:
            - id: "TOTAL"
              treeLevel: "TOTAL"
              score: 75
              metadata: "NONE"
              relevance: 88
              peersPercentile: 12
            - id: "ENVIRONMENTAL"
              treeLevel: "PILLAR"
              score: 70
              metadata: "NONE"
              relevance: 92
            - id: "SOCIAL"
              treeLevel: "PILLAR"
              score: 53
              metadata: "NONE"
              relevance: 81
            - id: "GOVERNANCE"
              treeLevel: "PILLAR"
              score: 69
              metadata: "NONE"
              relevance: 90
          items:
            $ref: "#/components/schemas/EsgScoreElement"
      description: "Fund with ESG Summary"
    PeersGroupFund:
      type: "object"
      properties:
        id:
          type: "string"
          description: "Identifier of the peer group the fund is categorized."
          example: "42"
        count:
          type: "integer"
          description: "Number of funds in that same peer group."
          format: "int32"
          example: 22
      description: "Peer group for the fund."
    RiskMetricsResource:
      type: "object"
      properties:
        scoringProfileId:
          type: "string"
          description: "Metric score ."
          example: "ESG_RISK_INDUSTRY_CONSENSUS"
        elements:
          type: "array"
          description: "Child elements (if any) for the metric"
          example:
            - id: "ANALYTICESTIMATEDCO2TOTAL"
              treeLevel: "METRIC"
              pillar: "ENVIRONMENTAL"
              score: 84
              metadata: "NONE"
              relevance: 96
            - id: "WATER_USE"
              treeLevel: "METRIC"
              pillar: "ENVIRONMENTAL"
              score: 100
              metadata: "NONE"
              relevance: 98
            - id: "ENERGYUSETOTAL"
              treeLevel: "METRIC"
              pillar: "ENVIRONMENTAL"
              score: 67
              metadata: "NONE"
              relevance: 81
          items:
            $ref: "#/components/schemas/RiskMatrixElement"
    RiskMatrixElement:
      type: "object"
      properties:
        id:
          type: "string"
          description: "Id of the metric/subcategory/category/pillar/total ESG behind the score."
          example: "ENERGYUSETOTAL"
        treeLevel:
          type: "string"
          description: "Level on the ESG tree to the metric belongs to"
          example: "PILLAR"
          enum:
            - "TOTAL"
            - "PILLAR"
            - "CATEGORY"
            - "SUBCATEGORY"
            - "METRIC"
        pillar:
          type: "string"
          description: "Pillar which this element belongs to"
          example: "ENVIRONMENTAL"
        score:
          type: "string"
          description: "Score for a specific scoring profile."
          format: "byte"
          example: "Nzg="
        metadata:
          type: "string"
          description: "Metadata for the score"
          example: "NONE"
          enum:
            - "NONE"
            - "ASSIGNED"
            - "LIMITED_INFO"
            - "NOT_AVAILABLE"
            - "NOT_IMPORTANT"
            - "NOT_APPLICABLE"
            - "OUT_OF_UNIVERSE"
        relevance:
          type: "integer"
          description: "Data Relevance is the total importance of all applicable metrics with raw data available. Depending on the configuration of the Scoring Profile, scores may be assigned for applicable metrics when raw data is not available."
          format: "int32"
          example: 98
      description: "Child elements (if any) for the metric"
      example:
        - id: "ANALYTICESTIMATEDCO2TOTAL"
          treeLevel: "METRIC"
          pillar: "ENVIRONMENTAL"
          score: 84
          metadata: "NONE"
          relevance: 96
        - id: "WATER_USE"
          treeLevel: "METRIC"
          pillar: "ENVIRONMENTAL"
          score: 100
          metadata: "NONE"
          relevance: 98
        - id: "ENERGYUSETOTAL"
          treeLevel: "METRIC"
          pillar: "ENVIRONMENTAL"
          score: 67
          metadata: "NONE"
          relevance: 81
  securitySchemes:
    JWT:
      type: "http"
      scheme: "bearer"
      bearerFormat: "JWT"
info:
  title: "Clarity AI API - ESG Risk"
  description: "API to access Clarity AI data services."
  termsOfService: "https://static.clarity.ai/Clarity_AI_TermsAndConditions.pdf"
  contact:
    name: "Clarity AI"
    url: "https://www.clarity.ai"
    email: "support@clarity.ai"
  version: "1.0.0"
openapi: "3.0.1"
paths:
  /public/securities/esg-risk/scores-by-id/async:
    post:
      tags:
        - "Universe download - Asynchronous jobs"
      summary: "Async Job - Request ESG Risk Securities Scores"
      description: "This endpoint will make a request for an async job to retrieve the whole universe of <a href=\"https://clarity.ai\">Clarity.AI</a> ESG Risk scores for given security types or security ids, score ids.<br>You can ask whether to get securities using securityTypes or provide a list of security ids (usually ISINs) with securityIds, <b>but NOT both</b>.<b>Please note</b>: This call will only return the identifier (UUID) for this task. You'll need this value later on further calls to know the status of your job (see <a href=\"./asyncjobstatus\">Async Job - Get job status</a>) or download your file when ready (see &laquo;Async Job - Download result file&raquo;)<br>Check <a href=\"/docs/universe-api-async-jobs\">this document</a> for a complete explanation of the flow for these Async jobs endpoints"
      operationId: "asyncRiskGetScores"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EsgRiskSecuritiesRequest"
        required: true
      responses:
        200:
          description: "The job request has been accepted, uuid follows"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateJobResource"
        400:
          description: "Bad parameters on request:\n\n2200 - The job was accepted but some error happened while processing\n\n2006 - At least one of the scores requested does not exist or this account does not have permission to access it\n\n2201 - Invalid parameters for this request\n\n5001 - List cannot be empty. At least one score id is required\n\n5003 - List cannot be empty. At least one security type is required\n\n5005 - List cannot be empty. At least one security ID is required\n\n5006 - Only one of these params can be present: %s. Please provide only one of them\n\n5007 - At least one of these params must be present: %s. Please provide one of them\n\n2202 - The value 'ALL' can not be used in conjunction with other identifier types\n\n2203 - 'idColumns' must match 'securityIdTypes' when requesting by specific IDs"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n1015 - The scoring profile does not exist or does not belong to the user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/organizations/esg-risk/scores-by-id/async:
    post:
      tags:
        - "Universe download - Asynchronous jobs"
      summary: "Async Job - Request ESG Risk Organizations Scores"
      description: "This endpoint will make a request for an async job to retrieve <a href=\"https://clarity.ai\">Clarity.AI</a> ESG Risk scores for given score ids.<br>You can request the whole scores universe or provide a list of permIds (see: <a href=\"https://permid.org/\">permid.org</a>).<b>Please note</b>: This call will only return the identifier (UUID) for this task. You'll need this value later on further calls to know the status of your job (see <a href=\"./asyncjobstatus\">Async Job - Get job status</a>) or download your file when ready (see &laquo;Async Job - Download result file&raquo;)<br>Check <a href=\"/docs/universe-api-async-jobs\">this document</a> for a complete explanation of the flow for these Async jobs endpoints"
      operationId: "asyncRiskGetOrganizationsScores"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EsgRiskOrganizationsRequest"
        required: true
      responses:
        200:
          description: "The job request has been accepted, uuid follows"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateJobResource"
        400:
          description: "Bad parameters on request:\n\n2200 - The job was accepted but some error happened while processing\n\n2006 - At least one of the scores requested does not exist or this account does not have permission to access it\n\n2201 - Invalid parameters for this request\n\n5001 - List cannot be empty. At least one score id is required\n\n5005 - List cannot be empty. At least one security ID is required\n\n"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n1015 - The scoring profile does not exist or does not belong to the user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/funds/esg-risk/scores-by-id/async:
    post:
      tags:
        - "Universe download - Asynchronous jobs"
      summary: "Async Job - Request ESG Risk Funds Scores"
      description: "This endpoint will make a request for an async job to retrieve the whole universe of <a href=\"https://clarity.ai\">Clarity.AI</a> ESG Risk Funds scores for given score ids.<br><b>Please note</b>: This call will only return the identifier (UUID) for this task. You'll need this value later on further calls to know the status of your job (see <a href=\"./asyncjobstatus\">Async Job - Get job status</a>) or download your file when ready (see &laquo;Async Job - Download result file&raquo;)<br>Check <a href=\"/docs/universe-api-async-jobs\">this document</a> for a complete explanation of the flow for these Async jobs endpoints"
      operationId: "asyncRiskGetFundsScores"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EsgRiskFundsRequest"
        required: true
      responses:
        200:
          description: "The job request has been accepted, uuid follows"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateJobResource"
        400:
          description: "Bad parameters on request:\n\n2200 - The job was accepted but some error happened while processing\n\n2006 - At least one of the scores requested does not exist or this account does not have permission to access it\n\n2201 - Invalid parameters for this request\n\n2202 - The value 'ALL' can not be used in conjunction with other identifier types"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n1015 - The scoring profile does not exist or does not belong to the user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/portfolios/{portfolioId}/esg-risk/top-organizations:
    get:
      tags:
        - "Portfolio ESG Risk"
      summary: "Get portfolio top 10 organizations ESG Risk scores by weight"
      description: "Given a portfolio id returns the top 10 organizations by portfolio weight and the Total ESG Risk score, Pillars score, its relevance and peers percentile respectively along with ESG Risk Coverage (number of companies and % of the portfolio with ESG Risk data)"
      operationId: "topOrganizations_1"
      parameters:
        - name: "portfolioId"
          in: "path"
          description: "portfolioId"
          required: true
          schema:
            type: "string"
          example: "9a2f825g00013311c3b93699"
      responses:
        200:
          description: "List of top 10 organizations items."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PortfolioOrganizationsResource"
        202:
          description: "Accepted:\n\n2017 - The portfolio is not yet created or is not available at this moment"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/portfolios/{portfolioId}/esg-risk/summary:
    get:
      tags:
        - "Portfolio ESG Risk"
      summary: "Get Total and pillar scores of the portfolio"
      description: "Given a portfolio id, returns the Total ESG score, Environmental score, Social score, Governance score and its relevance respectively for a specific Portfolio (portfolioId) calculated using a scoring profile, along with the name of the portfolio, last update date and ESG Coverage (% of the portfolio with esg data)."
      operationId: "esgByPortfolioId"
      parameters:
        - name: "portfolioId"
          in: "path"
          description: "Portfolio Id"
          required: true
          schema:
            type: "string"
          example: "9a2f825g00013311c3b93699"
      responses:
        200:
          description: "The score of the portfolio"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PortfolioEsgScore"
        400:
          description: "Invalid request:\n\n2004 - Portfolio id requested not valid or empty"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n1015 - The scoring profile does not exist or does not belong to the user\n\n2007 - The portfolio id does not exist or does not belong to the user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/portfolios/{portfolioId}/esg-risk/scores-by-id:
    get:
      tags:
        - "Portfolio ESG Risk"
      summary: "Get Specific Scores for Portfolio"
      description: "Return the requested scores for a given portfolioId."
      operationId: "getPortfolioMetrics"
      parameters:
        - name: "portfolioId"
          in: "path"
          description: "The portfolio id you are looking for"
          required: true
          schema:
            type: "string"
          example: "9a2f825g00013311c3b93699"
        - name: "scoreId"
          in: "query"
          description: "The scoreId identifiers"
          required: true
          schema:
            type: "array"
            items:
              type: "string"
          example: "[ENVIRONMENTAL, SOCIAL]"
      responses:
        200:
          description: "The requested scores of the portfolio"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ScoringProfileWithEsgScoresResource"
        400:
          description: "Invalid request:\n\n1014 - The data received in the request is not valid\n\n2006 - At least one of the scores requested does not exist or this account does not have permission to access it"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n2007 - The portfolio id does not exist or does not belong to the user"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/funds/{fundId}/esg-risk/summary:
    get:
      tags:
        - "Funds ESG Risk"
      summary: "Get total score for funds, and also by pillar"
      description: "Returns the Total ESG score, Environmental score, Social score, Governance score and its relevance respectively for a specific Fund, along with esg coverage (% of the fund with esg data), Peer group name of the fund, peer group count (as number of funds in the same peer group), and peer percentile of the fund."
      operationId: "getFundWithProfile"
      parameters:
        - name: "fundId"
          in: "path"
          description: "Identifier of the fund requested"
          required: true
          schema:
            type: "string"
          example: "XX0123456789"
        - name: "fundIdType"
          in: "query"
          description: "Fund identifier type (default value: ISIN)"
          required: false
          schema:
            type: "string"
            default: "ISIN"
          example: "CUSIP"
        - name: "version"
          in: "query"
          description: "Dataset version"
          required: false
          schema:
            type: "string"
          example: "2e6b4b6a-835d-11ec-a8a3-0242ac120002"
      responses:
        200:
          description: "The funds' ESG Risk scores"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FundSummaryEsgScore"
        400:
          description: "Invalid request:\n\n3006 - Fund ID type is not supported\n\n3000 - Fund ID requested not valid or empty"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n3001 - Fund ID not found\n\n1022 - The version does not exist or is obsolete"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
  /public/funds/{fundId}/esg-risk/scores-by-id:
    get:
      tags:
        - "Funds ESG Risk"
      summary: "Get specific scores for a Fund"
      description: "Return the requested scores for a given fund (isin)."
      operationId: "getFundMetrics"
      parameters:
        - name: "fundId"
          in: "path"
          description: "Identifier of the fund requested"
          required: true
          schema:
            type: "string"
          example: "XX0123456789"
        - name: "fundIdType"
          in: "query"
          description: "Fund identifier type (default value: ISIN)"
          required: false
          schema:
            type: "string"
            default: "ISIN"
          example: "CUSIP"
        - name: "scoreId"
          in: "query"
          description: "The scoreId identifiers"
          required: true
          schema:
            type: "array"
            items:
              type: "string"
          example: "[ANALYTICESTIMATEDCO2TOTAL, WATER_USE, ENERGYUSETOTAL]"
        - name: "version"
          in: "query"
          description: "Dataset version"
          required: false
          schema:
            type: "string"
          example: "2e6b4b6a-835d-11ec-a8a3-0242ac120002"
      responses:
        200:
          description: "The requested scores for the fund"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RiskMetricsResource"
        400:
          description: "Invalid request:\n\n1014 - The data received in the request is not valid\n\n2006 - At least one of the scores requested does not exist or this account does not have permission to access it\n\n3006 - Fund ID type is not supported\n\n3000 - Fund ID requested not valid or empty"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        401:
          description: "Invalid grant:\n\n1000 - Invalid authentication token or expired"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        403:
          description: "Forbidden:\n\n1001 - This account does not have permission to access this resource"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
        404:
          description: "Not found:\n\n3001 - Fund ID not found\n\n2006 - At least one of the scores requested does not exist or this account does not have permission to access it\n\n1022 - The version does not exist or is obsolete"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/APIError"
      security:
        - JWT: []
servers:
  - url: "https://api.clarity.ai/clarity/v1"
  - url: "https://api.dev.clarity.ai/clarity/v1"
tags:
  - name: "Funds ESG Risk"
    description: "Funds ESG Risk API"
  - name: "Portfolio ESG Risk"
    description: "Portfolio ESG Risk API"
  - name: "Universe download - Asynchronous jobs"
    description: "Universe download - Asynchronous jobs"
security:
  - JWT: []
